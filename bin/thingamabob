#!/usr/bin/env perl
use warnings;
use strict;

my $context;
my $flag = 0;

my $rxContext = shift;
my $rxMatch = shift;

$rxContext = qr{$rxContext};
$rxMatch   = qr{$rxMatch};

while (<>) {
    s{\R\z}{};
    if ($_ =~ $rxContext) {
        $context = $+{context} // $1;
        $flag = 0;
        next;
    }
    if ($_ =~ $rxMatch) {
        if (!$flag) {
            $flag = 1;
            print("$context\n");
        }
    }
}
