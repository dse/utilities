#!/usr/bin/env bash
set -o errexit
set -o nounset
set -o pipefail

main () {
    PROGNAME="$(basename "$0")"
    if [[ "$PROGNAME" = "altemacs" ]] ; then
        if ! (( $# )) ; then
            >&2 echo "$PROGNAME: requires initial <name> argument"
            exit 1
        fi
        export ALT_EMACS_NAME="$1"
        shift
    else
        export ALT_EMACS_NAME="${PROGNAME}"
    fi
    mkdir -p "${HOME}/.emacs.d/${ALT_EMACS_NAME}.d"
    touch    "${HOME}/.emacs.d/${ALT_EMACS_NAME}.d/init.el"
    exec emacs "${@}"
}

main "$@"
